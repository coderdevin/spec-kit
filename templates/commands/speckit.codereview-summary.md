---
description: Consolidate and organize reports from speckit.codereview-xxx and speckit.codereview-check into a well-structured, comprehensive summary document.
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

## Outline

1. **Locate Reports**: Search `.specify/reviews/` directory for:
   - Code review reports (generated by `speckit.codereview-react`, `speckit.codereview-python`, `speckit.codereview-java`, etc.)
   - Validation reports (generated by `speckit.codereview-check`)
   - Use user-specified files or most recent matching reports

2. **Read Reports**: Extract complete content from located reports:
   - Parse markdown structure and metadata
   - Identify component/module names
   - Extract all issues, findings, and validation results
   - Capture statistics and summary data

3. **Merge and Consolidate**: Create high-quality markdown document with:
   - **Filter invalid issues**: Exclude issues with validation status ❌ Invalid/Fixed from the report
   - **Merge same issues**: Combine original findings and validation results for the same issue into unified entries
   - **Include only valid issues**: Only include issues with validation status ✅ Valid, ⚠️ Partially Valid, or 🔄 Modified
   - **Clear hierarchical structure**: Organized by category, then by issue
   - **Consistent formatting**: Uniform presentation throughout
   - **Logical grouping**: Related issues grouped by category or component
   - **Information flow**: Each issue follows pattern: description → code → recommendation → validation → patterns
   - **No additional commentary**: Preserve original content without interpretation
   - **Clean, professional presentation**: High-quality markdown formatting

4. **Generate Summary Report**: Save to `.specify/reviews/codereview-summary-{component-name}-{timestamp}.md`

## Report Structure

```markdown
# Code Review Summary - {Component/Module Name}

## 📋 Report Metadata

| Item | Details |
|------|---------|
| **Generated** | {timestamp} |
| **Component/Module** | {name} |
| **Source Reports** | {list of source report filenames} |
| **Languages** | {detected languages} |
| **Total Issues Identified** | {count from original review} |
| **Issues Included in Report** | {count of valid/partially valid/modified issues} |
| **Issues Excluded (Fixed)** | {count of invalid/fixed issues} |

---

## 🔍 Review Findings

### {Category 1: e.g., Component Architecture, Error Handling, etc.}

#### Issue 1️⃣ {Issue Title}

**Priority**: {🔴 Critical / 🟠 High / 🟡 Medium / 🟢 Low}  
**Category**: {Design/API/Documentation/Performance/Security/etc.}  
**Validation Status**: {✅ Valid / ⚠️ Partially Valid / ❌ Invalid / 🔄 Modified}  
**Location**: `{filepath}` (Lines {line-start}-{line-end})

**Description**:
{original issue description from review report}

**Code Reference**:
```language
{problematic code snippet}
```

**Recommendation**:
{recommended solution from original report}

**Validation Analysis**:
{detailed explanation from validation report about why this issue is valid/invalid/modified}

**Similar Patterns Found**: {count} occurrences

1. **Location**: `{filepath}` (Lines {line-start}-{line-end})
   ```language
   {code snippet}
   ```
   **Description**: {pattern description}

2. **Location**: `{filepath}` (Lines {line-start}-{line-end})
   ```language
   {code snippet}
   ```
   **Description**: {pattern description}

---

#### Issue 2️⃣ {Issue Title}
{follow same structure}

---

### {Category 2}
{continue with remaining categories and issues}

---

## 📊 Consolidated Statistics

### Issue Distribution

| Metric | Count |
|--------|-------|
| Total Issues Identified | {count} |
| Critical Priority (🔴) | {count} |
| High Priority (🟠) | {count} |
| Medium Priority (🟡) | {count} |
| Low Priority (🟢) | {count} |

### Validation Summary

| Validation Status | Count |
|-------------------|-------|
| Valid Issues (✅) | {count} |
| Partially Valid (⚠️) | {count} |
| Modified/Changed (🔄) | {count} |
| Invalid/Fixed (❌) - Excluded | {count} |

### Category Breakdown

| Category | Issue Count |
|----------|-------------|
| {Category 1} | {count} |
| {Category 2} | {count} |
| {Category 3} | {count} |

### Pattern Analysis

| Metric | Count |
|--------|-------|
| Total Similar Patterns Found | {count} |
| High-Frequency Patterns (3+ occurrences) | {count} |

---

## 📝 Notes

- This summary consolidates findings from multiple code review reports
- Only includes issues validated as ✅ Valid, ⚠️ Partially Valid, or 🔄 Modified
- Issues validated as ❌ Invalid/Fixed are excluded from this report
- All code references are verified against the current codebase
- Pattern analysis identifies similar issues across the project
```

## Consolidation Principles

### Issue Filtering Strategy
- **Exclude Invalid Issues**: Do NOT include issues with validation status ❌ Invalid/Fixed in the consolidated report
- **Include Only Active Issues**: Only include issues with validation status ✅ Valid, ⚠️ Partially Valid, or 🔄 Modified
- **Track Exclusions**: Document count of excluded invalid/fixed issues in statistics section for reference

### Issue Merging Strategy
- **Unified Presentation**: Merge original findings and validation results for the same issue into a single entry
- **No Duplication**: Each issue appears only once with all related information consolidated
- **Complete Context**: Each issue entry includes: original description, validation status, validation analysis, and similar patterns
- **Integrated Flow**: Present information in logical order within each issue (description → code → recommendation → validation → patterns)

### Document Organization
- **Hierarchical Structure**: Use clear heading levels (H2 for major sections, H3 for categories, H4 for issues)
- **Consistent Formatting**: Apply uniform formatting for all similar elements
- **Logical Grouping**: Group related issues by category or component
- **Visual Clarity**: Use tables, code blocks, and emoji markers appropriately

### Content Preservation
- **No Additions**: Do not add interpretations, opinions, or extra content beyond source reports
- **No Omissions**: Include all issues and findings from source reports
- **Exact Quotes**: Preserve original descriptions, recommendations, and code snippets
- **Metadata Accuracy**: Maintain all source metadata (timestamps, locations, priorities)

### Formatting Standards
- **Code Blocks**: Use proper language tags for syntax highlighting
- **Tables**: Align columns properly with markdown table syntax
- **Line References**: Format as `{line-start}:{line-end}:{filepath}` for tool compatibility
- **Lists**: Use numbered lists for sequential items, bullets for non-sequential
- **Emphasis**: Use bold for labels, italic sparingly for emphasis

### Quality Markers
- **Professional Tone**: Clean, technical, objective presentation
- **Readability**: Easy to scan, clear hierarchy, logical flow
- **Completeness**: All source information represented
- **Actionability**: Easy to identify next steps and priorities

## Behavior Rules

- **🚨 CRITICAL: Filter Invalid Issues**: Do NOT include issues with validation status ❌ Invalid/Fixed in the consolidated report
- **Include Only Active Issues**: Only include issues validated as ✅ Valid, ⚠️ Partially Valid, or 🔄 Modified
- **Issue Consolidation**: Merge original review findings and validation results for the same issue into a unified entry
- **Multi-Report Support**: Handle multiple source reports gracefully, clearly identifying sources
- **Language Detection**: Auto-detect programming languages from file extensions and code blocks
- **Complete Integration**: Each issue must include: description, code reference, recommendation, validation status, validation analysis, and similar patterns (if available)
- **Deduplication**: If same issue appears in multiple reports, consolidate into single entry
- **Information Flow**: Present each issue in logical order: problem → evidence → solution → validation → patterns
- **Track Exclusions**: Document count of excluded invalid/fixed issues in the validation summary statistics
- **File Location**: MUST save to `.specify/reviews/codereview-summary-{component-name}-{timestamp}.md`
- **Read-Only Operation**: Do not modify source reports or code files
- **Error Handling**: If reports are missing or unreadable, clearly document which reports were used
- **Timestamp Format**: Use ISO 8601 format (YYYY-MM-DD HH:MM:SS) for timestamps
- **Pattern Tracking**: Track high-frequency patterns (3+ occurrences) in statistics section
- **Empty Sections**: If a section has no content, omit it rather than showing empty placeholders
- **🚨 CONCISE CODE EXAMPLES**: When consolidating code examples from source reports, preserve only concise examples (5-15 lines). If source reports contain long code blocks, extract only the problematic and fix sections.

---

Context for consolidation: $ARGUMENTS

